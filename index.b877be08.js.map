{"mappings":"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","sources":["src/js/services/references.js","src/js/navigation-headerBtn.js","src/js/services/fetch-movies.js","src/js/pagination.js","src/js/movies-gallery.js"],"sourcesContent":["export const refs={\n    header:document.querySelector('.header'),\n    homePageBtn:document.querySelector('[data-action=\"home\"]'),\n    libraryPageBtn:document.querySelector('[data-action=\"library\"]'),\n\n    searchForm:document.querySelector('.search-form'),\n    libraryHeaderBtnBox:document.querySelector('.header-btn-wrapper'),\n\n    moviesGallery:document.querySelector('.movies-gallery'),\n    \n    outerPaginationButtonsList:document.querySelector('.pagination-list'),\n    innerPaginationButtonsList:document.querySelector('.inner-pagination-list'),\n    prevBtn:document.querySelector('[data-action=\"prev\"]'),\n    nextBtn:document.querySelector('[data-action=\"next\"]'),\n};\n","import { refs } from \"./services/references\";\n\nrefs.homePageBtn.addEventListener('click', ()=>{\n    refs.homePageBtn.classList.add('underlined-js');\n    refs.libraryPageBtn.classList.remove('underlined-js');\n    refs.header.classList.remove('lib-header');\n    refs.searchForm.classList.remove('is-hidden');\n    refs.libraryHeaderBtnBox.classList.add('is-hidden');\n});\n\nrefs.libraryPageBtn.addEventListener('click',()=>{\n    refs.homePageBtn.classList.remove('underlined-js');\n    refs.libraryPageBtn.classList.add('underlined-js');\n    refs.header.classList.add('lib-header');\n    refs.searchForm.classList.add('is-hidden');\n    refs.libraryHeaderBtnBox.classList.remove('is-hidden');\n});\n","const URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = '7ab62af97d9519a1533e4099d15ee467';\n\nasync function fetchMovies(page){\n const res = await fetch(`${URL}movie/popular?api_key=${API_KEY}&page=${page}&adult=true`);\n    return await res.json();\n} \n\nasync function fetchMoviesById(movieId){\n    const res=await fetch(`${URL}movie/${movieId}?api_key=${API_KEY}&language=en-US`)\n    return await res.json();\n};\n\nasync function searchMovies(query){\n    const res=await fetch(`${URL}search/movie?api_key=${API_KEY}&language=en-US&page=1&include_adult=false&query=${query}`)\n    return await res.json();\n}\n\nasync function fetchPopularMovies(curPage){\n    const res=await fetch(`${URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${curPage}&include_adult=false`)\n    return await res.json();\n}\n\nexport default {fetchMovies, fetchMoviesById, searchMovies, fetchPopularMovies}","import { refs } from \"./services/references\";\nimport { fetchAndRenderMainPageContent } from \"./movies-gallery\";\n\nexport  function renderPaginationMarkup(currentPage, totalPages, numAdjacentPages) {\n    let paginationMarkup = \"\";\n    \n    if(totalPages>500){\n        totalPages=500;\n    };\n\n    if (totalPages < 6) {\n    for (let i = 1; i <= totalPages; i++) {\n    paginationMarkup += createPaginationMarkupString(i);\n    }\n    }\n    \n    if (\n    totalPages > 6 &&\n    currentPage + numAdjacentPages < totalPages &&\n    totalPages - currentPage >= 6\n    ) {\n    if (currentPage < 6) {\n    for (let i = 1; i <= 6; i++) {\n    paginationMarkup += createPaginationMarkupString(i);\n    }\n    } else {\n    paginationMarkup += `${createPaginationMarkupString(1)}<span>...</span>`;\n    \n    \n      for (let i = currentPage - numAdjacentPages; i <= currentPage + numAdjacentPages; i++) {\n        paginationMarkup += `${createPaginationMarkupString(i)}`;\n      }\n    }\n    \n    paginationMarkup += `<span>...</span>${createPaginationMarkupString(totalPages)}`;\n    }\n    \n    if (totalPages > 6 && totalPages - currentPage < 6) {\n    paginationMarkup += `${createPaginationMarkupString(1)}<span>...</span>`;\n    \n    \n    for (let i = totalPages - 6; i <= totalPages; i++) {\n      paginationMarkup += createPaginationMarkupString(i);\n    }\n    }\n    \n    appendPaginationMarkup(paginationMarkup);\n\n    let paginateBtns=[...document.querySelectorAll('.paginate-btn')]\n    paginateBtns.map(btn=>{\n        if(btn.name==currentPage){\n            btn.classList.add('active-btn')\n        }\n        else{\n            btn.classList.remove('active-btn')\n        }\n    })\n    }\n    \n    // // Обработка кликов на кнопки пагинации\n    refs.innerPaginationButtonsList.addEventListener(\"click\", switchingPages);\n    \n    function switchingPages(e) {\n    refs.activePaginationBtn = refs.innerPaginationButtonsList.querySelector(\"li .active-btn\");\n    \n    const lastPaginationPage = refs.innerPaginationButtonsList.lastChild.querySelector(\".paginate-btn\");\n    let totalPages= Number(lastPaginationPage.name);\n    let currentPage = Number(e.target.name);\n    \n    if (e.target.className !== \"paginate-btn\") {\n    return;\n    }\n\n    updateUI(currentPage, totalPages, lastPaginationPage);\n}\n\nrefs.prevBtn.addEventListener('click', ()=>{\n    const lastPaginationPage = refs.innerPaginationButtonsList.lastChild.querySelector(\".paginate-btn\");\n    let activePaginateBtn=refs.innerPaginationButtonsList.getElementsByClassName(\"paginate-btn active-btn\")\n    let totalPages= Number(lastPaginationPage.name);\n    let currentPage=Number(activePaginateBtn[0].name)-1;\n\n    updateUI(currentPage, totalPages, lastPaginationPage);\n   \n})\nrefs.nextBtn.addEventListener('click', ()=>{\n    const lastPaginationPage = refs.innerPaginationButtonsList.lastChild.querySelector(\".paginate-btn\");\n    let activePaginateBtn=refs.innerPaginationButtonsList.getElementsByClassName(\"paginate-btn active-btn\")\n    let totalPages= Number(lastPaginationPage.name);\n    let currentPage=Number(activePaginateBtn[0].name)+1;\n\n    updateUI(currentPage, totalPages, lastPaginationPage);\n})\n\nfunction updateUI(currentPage, totalPages, lastPaginationPage){\n    currentPage !== 1 ? enabledPaginationBtn(refs.prevBtn) : disabledPaginationBtn(refs.prevBtn);\n    currentPage == lastPaginationPage.name ? disabledPaginationBtn(refs.nextBtn) : enabledPaginationBtn(refs.nextBtn);\n\n    refs.moviesGallery.innerHTML='';\n    fetchAndRenderMainPageContent(currentPage);\n    renderPaginationMarkup(currentPage, totalPages, 2);\n    scrollUp();\n}\n    \n    function createPaginationMarkupString(val){\n       return `<li class=\"pagination-item\"><button class=\"paginate-btn\" type=\"button\" name=\"${val}\">${val}</button></li>`\n    };\n    \n    function appendPaginationMarkup(markup){\n       refs.innerPaginationButtonsList.innerHTML=markup;\n    };\n    \n    function disabledPaginationBtn(el){\n       el.setAttribute('disabled', '');\n       el.classList.remove('paginate-btn')\n    };\n    \n    function enabledPaginationBtn(el){\n       el.removeAttribute('disabled');\n       el.classList.add('paginate-btn')\n    };\n    \n   function scrollUp() {\n    setTimeout(() => {\n        window.scrollTo({\n            top: 300,\n            behavior: 'smooth',\n         })\n    }, 100);\n    };","import { refs } from \"./services/references\";\nimport api from \"./services/fetch-movies\";\nimport { renderPaginationMarkup } from \"./pagination\";\n\nexport async function fetchAndRenderMainPageContent(page){\n await api.fetchMovies(page)\n  .then(({results, total_pages})=>{ \n  appendMarkup(refs.moviesGallery,results);\n  renderPaginationMarkup(page, total_pages, 2);\n  }\n  );\n};\n\nfetchAndRenderMainPageContent(1);\n\n\nfunction createMoviesGalleryMarkup(items){\n  return  items.map(item=>`\n    <li class=\"movie__item\">\n    <img \n    class=\"movie__image\" \n    src=\"https://image.tmdb.org/t/p/w500${item.poster_path}\" \n    alt=\"${item.title}\"/>\n    <h2 class=\"movie__name\">${item.title}</h2>\n    <div class=\"movie__info-box\">\n    <p class=\"movie__info\">${item.vote_average.toFixed(1)}</p>\n    <p class=\"movie__info\">${item.release_date}</p>\n    </div>\n    </li>`).join(\"\")\n};\n\nexport function appendMarkup(selector,items){\n    selector.insertAdjacentHTML('beforeend',  createMoviesGalleryMarkup(items))\n}"],"names":["$4eb2ff861fd80d27$export$21666b427502ea6d","header","document","querySelector","homePageBtn","libraryPageBtn","searchForm","libraryHeaderBtnBox","moviesGallery","outerPaginationButtonsList","innerPaginationButtonsList","prevBtn","nextBtn","addEventListener","classList","add","remove","$ae75ee0cc0070290$export$2e2bcd8739ae039","async","page","res","fetch","json","movieId","query","curPage","$1bab9c519cfa82bc$export$c1930e35444d24ce","currentPage","totalPages","numAdjacentPages","paginationMarkup","i","$1bab9c519cfa82bc$var$createPaginationMarkupString","markup","innerHTML","querySelectorAll","map","btn","name","$1bab9c519cfa82bc$var$updateUI","lastPaginationPage","$1bab9c519cfa82bc$var$enabledPaginationBtn","$1bab9c519cfa82bc$var$disabledPaginationBtn","$969a51914dd5fd99$export$1383675519a926fe","setTimeout","window","scrollTo","top","behavior","val","el","setAttribute","removeAttribute","fetchMovies","then","results","total_pages","items","insertAdjacentHTML","item","poster_path","title","vote_average","toFixed","release_date","join","$969a51914dd5fd99$var$createMoviesGalleryMarkup","e","activePaginationBtn","lastChild","Number","target","className","activePaginateBtn","getElementsByClassName"],"version":3,"file":"index.b877be08.js.map"}